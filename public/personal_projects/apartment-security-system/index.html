<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>apartment security system ðŸš¨ | andrew jacobson</title>
<meta name="keywords" content="Personal, Web Development, Python, Raspberry Pi, API">
<meta name="description" content="A LAMP stack web app that connected a wireless sensor and Raspberry Pi to monitor our apartment&rsquo;s front door and provide alarm notifications.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/personal_projects/apartment-security-system/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a482bf00fa5c046040ef7973ad5fdf5657890cacb596c93f1382f664ca542074.css" integrity="sha256-pIK/APpcBGBA73lzrV/fVleJDKy1lsk/E4L2ZMpUIHQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/personal_projects/apartment-security-system/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="andrew jacobson (Alt + H)">andrew jacobson</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="about">
                    <span>about</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/personal_projects/" title="personal projects">
                    <span>personal projects</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/work_projects/" title="work projects">
                    <span>work projects</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="posts">
                    <span>posts</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      apartment security system ðŸš¨
    </h1>
    <div class="post-meta"><span title='2020-07-01 00:00:00 +0000 UTC'>July 1, 2020</span>

</div>
  </header> 
  <div class="post-content"><p>As a fun side project, I wanted to create a simple security system for our apartment. The system connected to our front door and allowed us to set different modes (normal, work day, nighttime, vacation, etc.), receive email or text notifications, play audio alerts (doorbell and alarm sounds), and log timestamps whenever the door opened. On a typical day, opening the door would trigger the doorbell sound and log the entry in the database. When we were away on vacation, I configured the &ldquo;Vacation&rdquo; mode to send me text alerts whenever the door openedâ€”for example, when the pet sitter stopped by.</p>
<p>I repurposed a spare Raspberry Pi 3 that had been collecting dust and connected an extra speaker to it. I ordered a <strong><a href="https://www.jemrf.com/products/wireless-switch">wireless magnetic contact sensor switch</a></strong> and an <strong><a href="https://www.jemrf.com/products/wireless-base-station-for-raspberry-pi">IoT gateway module</a></strong> for the Pi. This project also gave me my first opportunity to solder components, which was a great learning experience.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center"><img alt="picture of sensor on door" loading="lazy" src="/personal_projects/apartment-security-system/sensor.jpg"></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center"><em>Wireless sensor on the front door</em></td>
      </tr>
  </tbody>
</table>
<p>I configured a LAMP stack on the Pi, along with the serial port for communication with the sensor. The user interface was a single, straightforward webpage styled using Bootstrap.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center"><img alt="screenshot of main web page" loading="lazy" src="/personal_projects/apartment-security-system/apartment-security-system.jpg"></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center"><em>User interface</em></td>
      </tr>
  </tbody>
</table>
<p>The core functionality lived in a Python script that ran continuously on the Pi, monitoring serial communication for any status changes from the door sensor. I used the <strong><a href="https://www.twilio.com/docs/usage/api">Twilio API</a></strong> to send text messages. I&rsquo;ve included a snippet of the Python code below.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Set up serial connection</span>
</span></span><span style="display:flex;"><span>serial_connection <span style="color:#f92672">=</span> serial<span style="color:#f92672">.</span>Serial(port<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;/dev/ttyS0&#39;</span>, baudrate<span style="color:#f92672">=</span><span style="color:#ae81ff">9600</span>, stopbits<span style="color:#f92672">=</span>serial<span style="color:#f92672">.</span>STOPBITS_ONE, bytesize<span style="color:#f92672">=</span>serial<span style="color:#f92672">.</span>EIGHTBITS, timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Main program loop; runs continuously</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">True</span>):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Read in serial data</span>
</span></span><span style="display:flex;"><span>    serial_message <span style="color:#f92672">=</span> str(serial_connection<span style="color:#f92672">.</span>readline())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Check serial data</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#34;BUTTONON&#34;</span> <span style="color:#f92672">in</span> serial_message:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Open database connection and cursor</span>
</span></span><span style="display:flex;"><span>        db_connection <span style="color:#f92672">=</span> open_database_connection(hostname, db_name, db_username, db_password)
</span></span><span style="display:flex;"><span>        db_cursor <span style="color:#f92672">=</span> open_database_cursor(db_connection)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Retrieve current program and current settings</span>
</span></span><span style="display:flex;"><span>        current_program <span style="color:#f92672">=</span> fetch_current_program(db_cursor)
</span></span><span style="display:flex;"><span>        current_settings <span style="color:#f92672">=</span> fetch_current_settings(db_cursor)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Check settings and perform appropriate actions</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> current_settings[<span style="color:#e6db74">&#39;Doorbell Sound&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Call function to play doorbell sound</span>
</span></span><span style="display:flex;"><span>            filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;doorbell.mp3&#34;</span>
</span></span><span style="display:flex;"><span>            loops <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            sleeptime <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>            play_sound(filename, loops, sleeptime)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> current_settings[<span style="color:#e6db74">&#39;Alarm Sound&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Call function to play doorbell sound</span>
</span></span><span style="display:flex;"><span>            filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;alarm.mp3&#34;</span>
</span></span><span style="display:flex;"><span>            loops <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>            sleeptime <span style="color:#f92672">=</span> <span style="color:#ae81ff">21</span>
</span></span><span style="display:flex;"><span>            play_sound(filename, loops, sleeptime)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> current_settings[<span style="color:#e6db74">&#39;Send Text (Andrew)&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            send_text(andrew_cell_number)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> current_settings[<span style="color:#e6db74">&#39;Send Text (Wife)&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            send_text(wife_cell_number)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> current_settings[<span style="color:#e6db74">&#39;Send Email (Andrew)&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Craft email</span>
</span></span><span style="display:flex;"><span>            subject <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;DOOR OPENED&#34;</span>
</span></span><span style="display:flex;"><span>            body <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%c</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>            message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Subject: </span><span style="color:#e6db74">{}</span><span style="color:#ae81ff">\n\n</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(subject, body)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Call function to send email</span>
</span></span><span style="display:flex;"><span>            send_email(message, andrew_email)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> current_settings[<span style="color:#e6db74">&#39;Send Email (Wife)&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Craft email</span>
</span></span><span style="display:flex;"><span>            subject <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;DOOR OPENED&#34;</span>
</span></span><span style="display:flex;"><span>            body <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%c</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>            message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Subject: </span><span style="color:#e6db74">{}</span><span style="color:#ae81ff">\n\n</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(subject, body)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Call function to send email</span>
</span></span><span style="display:flex;"><span>            send_email(message, wife_email)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Write event to database</span>
</span></span><span style="display:flex;"><span>        current_timestamp <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>now()
</span></span><span style="display:flex;"><span>        insert_door_opening(db_connection, db_cursor, current_timestamp, current_program)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># Close database cursor and connection</span>
</span></span><span style="display:flex;"><span>        db_cursor<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>        db_connection<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><p>Even though the Raspberry Pi has long since been repurposed, I look back on this project and realize it was an excellent introduction to working with APIs and integrating hardware with software.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/personal/">Personal</a></li>
      <li><a href="http://localhost:1313/tags/web-development/">Web Development</a></li>
      <li><a href="http://localhost:1313/tags/python/">Python</a></li>
      <li><a href="http://localhost:1313/tags/raspberry-pi/">Raspberry Pi</a></li>
      <li><a href="http://localhost:1313/tags/api/">API</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/personal_projects/stock-analyzer/">
    <span class="title">Â« Prev</span>
    <br>
    <span>stock tracker &amp; analyzer ðŸ“ˆ</span>
  </a>
  <a class="next" href="http://localhost:1313/personal_projects/trailcam-photo-analyzer/">
    <span class="title">Next Â»</span>
    <br>
    <span>trail camera photos analyzer ðŸ¦Œ</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">andrew jacobson</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
