<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>apartment security system üö® | andrew jacobson</title><meta name=keywords content="Personal,Web Development,Python,Raspberry Pi,API"><meta name=description content="A LAMP stack web app that connected a wireless sensor and Raspberry Pi to monitor our apartment&rsquo;s front door and provide alarm notifications."><meta name=author content><link rel=canonical href=https://andrew-data-dev.github.io/personal_projects/apartment-security-system/><link crossorigin=anonymous href=/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn+yY=" rel="preload stylesheet" as=style><link rel=icon href=https://andrew-data-dev.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andrew-data-dev.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andrew-data-dev.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://andrew-data-dev.github.io/apple-touch-icon.png><link rel=mask-icon href=https://andrew-data-dev.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://andrew-data-dev.github.io/personal_projects/apartment-security-system/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://andrew-data-dev.github.io/personal_projects/apartment-security-system/"><meta property="og:site_name" content="andrew jacobson"><meta property="og:title" content="apartment security system üö®"><meta property="og:description" content="A LAMP stack web app that connected a wireless sensor and Raspberry Pi to monitor our apartment‚Äôs front door and provide alarm notifications."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="personal_projects"><meta property="article:published_time" content="2020-07-01T00:00:00+00:00"><meta property="article:modified_time" content="2020-07-01T00:00:00+00:00"><meta property="article:tag" content="Personal"><meta property="article:tag" content="Web Development"><meta property="article:tag" content="Python"><meta property="article:tag" content="Raspberry Pi"><meta property="article:tag" content="API"><meta name=twitter:card content="summary"><meta name=twitter:title content="apartment security system üö®"><meta name=twitter:description content="A LAMP stack web app that connected a wireless sensor and Raspberry Pi to monitor our apartment&rsquo;s front door and provide alarm notifications."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"personal projects","item":"https://andrew-data-dev.github.io/personal_projects/"},{"@type":"ListItem","position":2,"name":"apartment security system üö®","item":"https://andrew-data-dev.github.io/personal_projects/apartment-security-system/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"apartment security system üö®","name":"apartment security system üö®","description":"A LAMP stack web app that connected a wireless sensor and Raspberry Pi to monitor our apartment\u0026rsquo;s front door and provide alarm notifications.","keywords":["Personal","Web Development","Python","Raspberry Pi","API"],"articleBody":"As a fun side project, I wanted to create a simple security system for our apartment. The system connected to our front door and allowed us to set different modes (normal, work day, nighttime, vacation, etc.), receive email or text notifications, play audio alerts (doorbell and alarm sounds), and log timestamps whenever the door opened. On a typical day, opening the door would trigger the doorbell sound and log the entry in the database. When we were away on vacation, I configured the ‚ÄúVacation‚Äù mode to send me text alerts whenever the door opened‚Äîfor example, when the pet sitter stopped by.\nI repurposed a spare Raspberry Pi 3 that had been collecting dust and connected an extra speaker to it. I ordered a wireless magnetic contact sensor switch and an IoT gateway module for the Pi. This project also gave me my first opportunity to solder components, which was a great learning experience.\nWireless sensor on the front door I configured a LAMP stack on the Pi, along with the serial port for communication with the sensor. The user interface was a single, straightforward webpage styled using Bootstrap.\nUser interface The core functionality lived in a Python script that ran continuously on the Pi, monitoring serial communication for any status changes from the door sensor. I used the Twilio API to send text messages. I‚Äôve included a snippet of the Python code below.\n# Set up serial connection serial_connection = serial.Serial(port='/dev/ttyS0', baudrate=9600, stopbits=serial.STOPBITS_ONE, bytesize=serial.EIGHTBITS, timeout=1) # Main program loop; runs continuously while (True): # Read in serial data serial_message = str(serial_connection.readline()) # Check serial data if \"BUTTONON\" in serial_message: # Open database connection and cursor db_connection = open_database_connection(hostname, db_name, db_username, db_password) db_cursor = open_database_cursor(db_connection) # Retrieve current program and current settings current_program = fetch_current_program(db_cursor) current_settings = fetch_current_settings(db_cursor) # Check settings and perform appropriate actions if current_settings['Doorbell Sound'] == True: # Call function to play doorbell sound filename = \"doorbell.mp3\" loops = 1 sleeptime = 5 play_sound(filename, loops, sleeptime) if current_settings['Alarm Sound'] == True: # Call function to play doorbell sound filename = \"alarm.mp3\" loops = 3 sleeptime = 21 play_sound(filename, loops, sleeptime) if current_settings['Send Text (Andrew)'] == True: send_text(andrew_cell_number) if current_settings['Send Text (Wife)'] == True: send_text(wife_cell_number) if current_settings['Send Email (Andrew)'] == True: # Craft email subject = \"DOOR OPENED\" body = time.strftime(\"%c\") message = \"Subject: {}\\n\\n{}\".format(subject, body) # Call function to send email send_email(message, andrew_email) if current_settings['Send Email (Wife)'] == True: # Craft email subject = \"DOOR OPENED\" body = time.strftime(\"%c\") message = \"Subject: {}\\n\\n{}\".format(subject, body) # Call function to send email send_email(message, wife_email) # Write event to database current_timestamp = datetime.datetime.now() insert_door_opening(db_connection, db_cursor, current_timestamp, current_program) # Close database cursor and connection db_cursor.close() db_connection.close() Even though the Raspberry Pi has long since been repurposed, I look back on this project and realize it was an excellent introduction to working with APIs and integrating hardware with software.\n","wordCount":"476","inLanguage":"en","datePublished":"2020-07-01T00:00:00Z","dateModified":"2020-07-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://andrew-data-dev.github.io/personal_projects/apartment-security-system/"},"publisher":{"@type":"Organization","name":"andrew jacobson","logo":{"@type":"ImageObject","url":"https://andrew-data-dev.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andrew-data-dev.github.io/ accesskey=h title="andrew jacobson (Alt + H)">andrew jacobson</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://andrew-data-dev.github.io/ title=about><span>about</span></a></li><li><a href=https://andrew-data-dev.github.io/personal_projects/ title="personal projects"><span>personal projects</span></a></li><li><a href=https://andrew-data-dev.github.io/work_projects/ title="work projects"><span>work projects</span></a></li><li><a href=https://andrew-data-dev.github.io/posts/ title=posts><span>posts</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">apartment security system üö®</h1><div class=post-meta><span title='2020-07-01 00:00:00 +0000 UTC'>July 1, 2020</span></div></header><div class=post-content><p>As a fun side project, I wanted to create a simple security system for our apartment. The system connected to our front door and allowed us to set different modes (normal, work day, nighttime, vacation, etc.), receive email or text notifications, play audio alerts (doorbell and alarm sounds), and log timestamps whenever the door opened. On a typical day, opening the door would trigger the doorbell sound and log the entry in the database. When we were away on vacation, I configured the &ldquo;Vacation&rdquo; mode to send me text alerts whenever the door opened‚Äîfor example, when the pet sitter stopped by.</p><p>I repurposed a spare Raspberry Pi 3 that had been collecting dust and connected an extra speaker to it. I ordered a <strong><a href=https://www.jemrf.com/products/wireless-switch>wireless magnetic contact sensor switch</a></strong> and an <strong><a href=https://www.jemrf.com/products/wireless-base-station-for-raspberry-pi>IoT gateway module</a></strong> for the Pi. This project also gave me my first opportunity to solder components, which was a great learning experience.</p><table><thead><tr><th style=text-align:center><img alt="picture of sensor on door" loading=lazy src=/personal_projects/apartment-security-system/sensor.jpg></th></tr></thead><tbody><tr><td style=text-align:center><em>Wireless sensor on the front door</em></td></tr></tbody></table><p>I configured a LAMP stack on the Pi, along with the serial port for communication with the sensor. The user interface was a single, straightforward webpage styled using Bootstrap.</p><table><thead><tr><th style=text-align:center><img alt="screenshot of main web page" loading=lazy src=/personal_projects/apartment-security-system/apartment-security-system.jpg></th></tr></thead><tbody><tr><td style=text-align:center><em>User interface</em></td></tr></tbody></table><p>The core functionality lived in a Python script that ran continuously on the Pi, monitoring serial communication for any status changes from the door sensor. I used the <strong><a href=https://www.twilio.com/docs/usage/api>Twilio API</a></strong> to send text messages. I&rsquo;ve included a snippet of the Python code below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Set up serial connection</span>
</span></span><span style=display:flex><span>serial_connection <span style=color:#f92672>=</span> serial<span style=color:#f92672>.</span>Serial(port<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/dev/ttyS0&#39;</span>, baudrate<span style=color:#f92672>=</span><span style=color:#ae81ff>9600</span>, stopbits<span style=color:#f92672>=</span>serial<span style=color:#f92672>.</span>STOPBITS_ONE, bytesize<span style=color:#f92672>=</span>serial<span style=color:#f92672>.</span>EIGHTBITS, timeout<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Main program loop; runs continuously</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> (<span style=color:#66d9ef>True</span>):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Read in serial data</span>
</span></span><span style=display:flex><span>    serial_message <span style=color:#f92672>=</span> str(serial_connection<span style=color:#f92672>.</span>readline())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Check serial data</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#34;BUTTONON&#34;</span> <span style=color:#f92672>in</span> serial_message:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Open database connection and cursor</span>
</span></span><span style=display:flex><span>        db_connection <span style=color:#f92672>=</span> open_database_connection(hostname, db_name, db_username, db_password)
</span></span><span style=display:flex><span>        db_cursor <span style=color:#f92672>=</span> open_database_cursor(db_connection)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Retrieve current program and current settings</span>
</span></span><span style=display:flex><span>        current_program <span style=color:#f92672>=</span> fetch_current_program(db_cursor)
</span></span><span style=display:flex><span>        current_settings <span style=color:#f92672>=</span> fetch_current_settings(db_cursor)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Check settings and perform appropriate actions</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> current_settings[<span style=color:#e6db74>&#39;Doorbell Sound&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Call function to play doorbell sound</span>
</span></span><span style=display:flex><span>            filename <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;doorbell.mp3&#34;</span>
</span></span><span style=display:flex><span>            loops <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>            sleeptime <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>            play_sound(filename, loops, sleeptime)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> current_settings[<span style=color:#e6db74>&#39;Alarm Sound&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Call function to play doorbell sound</span>
</span></span><span style=display:flex><span>            filename <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;alarm.mp3&#34;</span>
</span></span><span style=display:flex><span>            loops <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>            sleeptime <span style=color:#f92672>=</span> <span style=color:#ae81ff>21</span>
</span></span><span style=display:flex><span>            play_sound(filename, loops, sleeptime)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> current_settings[<span style=color:#e6db74>&#39;Send Text (Andrew)&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            send_text(andrew_cell_number)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> current_settings[<span style=color:#e6db74>&#39;Send Text (Wife)&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            send_text(wife_cell_number)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> current_settings[<span style=color:#e6db74>&#39;Send Email (Andrew)&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Craft email</span>
</span></span><span style=display:flex><span>            subject <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;DOOR OPENED&#34;</span>
</span></span><span style=display:flex><span>            body <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>%c</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>            message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Subject: </span><span style=color:#e6db74>{}</span><span style=color:#ae81ff>\n\n</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>format(subject, body)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Call function to send email</span>
</span></span><span style=display:flex><span>            send_email(message, andrew_email)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> current_settings[<span style=color:#e6db74>&#39;Send Email (Wife)&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Craft email</span>
</span></span><span style=display:flex><span>            subject <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;DOOR OPENED&#34;</span>
</span></span><span style=display:flex><span>            body <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>%c</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>            message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Subject: </span><span style=color:#e6db74>{}</span><span style=color:#ae81ff>\n\n</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>format(subject, body)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Call function to send email</span>
</span></span><span style=display:flex><span>            send_email(message, wife_email)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Write event to database</span>
</span></span><span style=display:flex><span>        current_timestamp <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>datetime<span style=color:#f92672>.</span>now()
</span></span><span style=display:flex><span>        insert_door_opening(db_connection, db_cursor, current_timestamp, current_program)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>		<span style=color:#75715e># Close database cursor and connection</span>
</span></span><span style=display:flex><span>        db_cursor<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>        db_connection<span style=color:#f92672>.</span>close()
</span></span></code></pre></div><p>Even though the Raspberry Pi has long since been repurposed, I look back on this project and realize it was an excellent introduction to working with APIs and integrating hardware with software.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://andrew-data-dev.github.io/tags/personal/>Personal</a></li><li><a href=https://andrew-data-dev.github.io/tags/web-development/>Web Development</a></li><li><a href=https://andrew-data-dev.github.io/tags/python/>Python</a></li><li><a href=https://andrew-data-dev.github.io/tags/raspberry-pi/>Raspberry Pi</a></li><li><a href=https://andrew-data-dev.github.io/tags/api/>API</a></li></ul><nav class=paginav><a class=prev href=https://andrew-data-dev.github.io/personal_projects/stock-analyzer/><span class=title>¬´ Prev</span><br><span>stock tracker & analyzer üìà</span>
</a><a class=next href=https://andrew-data-dev.github.io/personal_projects/trailcam-photo-analyzer/><span class=title>Next ¬ª</span><br><span>trail camera photos analyzer ü¶å</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://andrew-data-dev.github.io/>andrew jacobson</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>